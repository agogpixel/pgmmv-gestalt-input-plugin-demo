/**
 * Copyright 2022 Tristan Bonsor - All Rights Reserved.
 * 
 * This file, and its originating project files, are released under the MIT license: https://github.com/agogpixel/pgmmv-gestalt-input-plugin/blob/main/LICENSE
 * 
 * For more information, please see:
 *  - Github Repository: https://github.com/agogpixel/pgmmv-gestalt-input-plugin
 *  - Published Builds & Usage: https://agogpixel.itch.io/pgmmv-gestalt-input-plugin
 */(function() {
return function(){"use strict";var e={934:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.createLogger=n.jsonIndentSizeMax=n.jsonIndentSizeMin=n.defaultJsonStringifyFunctions=n.defaultJsonIndentSize=void 0;var o=t(804),i=t(34),r=t(30)
;n.defaultJsonIndentSize=2,n.defaultJsonStringifyFunctions=!1,n.jsonIndentSizeMin=0,n.jsonIndentSizeMax=8,n.createLogger=function(e,t){var a,c={},u=t||{};return u.logLevel=e.logLevel||r.LogLevel.Info,
u.jsonIndentSize="number"!=typeof e.jsonIndentSize?n.defaultJsonIndentSize:cc.clampf(e.jsonIndentSize,n.jsonIndentSizeMin,n.jsonIndentSizeMax),u.jsonStringifyFunctions=!!e.jsonStringifyFunctions||n.defaultJsonStringifyFunctions,
u.logLevelMap=e.logLevelMap||((a={})[r.LogLevel.Debug]=r.LogLevel[r.LogLevel.Debug],a[r.LogLevel.Info]=r.LogLevel[r.LogLevel.Info],a[r.LogLevel.Warn]=r.LogLevel[r.LogLevel.Warn],a[r.LogLevel.Error]=r.LogLevel[r.LogLevel.Error],
a[r.LogLevel.Fatal]=r.LogLevel[r.LogLevel.Fatal],a),u.runtimeLog=e.runtimeLog||Agtk.log,c.log=function(e,n){if("string"==typeof n||"number"==typeof n){var t="string"==typeof n?r.LogLevel[n]:n;if(!(t<u.logLevel)){var a="string"==typeof e?e:(0,
i.toJson)(e,u.jsonIndentSize,u.jsonStringifyFunctions),c="[".concat((0,o.getUnixTimestamp)(),"] ").concat(u.logLevelMap[t],": ").concat(a);u.runtimeLog(c)}}else u.runtimeLog("string"==typeof e?e:(0,i.toJson)(e,u.jsonIndentSize,u.jsonStringifyFunctions))},
c.debug=function(e){c.log(e,r.LogLevel.Debug)},c.info=function(e){c.log(e,r.LogLevel.Info)},c.warn=function(e){c.log(e,r.LogLevel.Warn)},c.error=function(e){c.log(e,r.LogLevel.Error)},c.fatal=function(e){c.log(e,r.LogLevel.Fatal)},
c.getLogLevel=function(){return u.logLevel},c.setLogLevel=function(e){return u.logLevel=e,c},c.getRuntimeLog=function(){return u.runtimeLog},c.setRuntimeLog=function(e){return u.runtimeLog=e,c},c.getJsonIndentSize=function(){return u.jsonIndentSize},
c.setJsonIndentSize=function(e){return u.jsonIndentSize=cc.clampf(e,n.jsonIndentSizeMin,n.jsonIndentSizeMax),c},c.getJsonStringifyFunctions=function(){return u.jsonStringifyFunctions},c.setJsonStringifyFunctions=function(e){
return u.jsonStringifyFunctions=e,c},c.getLogLevelMap=function(){return u.logLevelMap},c.setLogLevelMap=function(e){return u.logLevelMap=e,c},c}},30:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=void 0,function(e){
e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Fatal=4]="Fatal"}(n.LogLevel||(n.LogLevel={}))},459:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getObjectInstance=void 0,
n.getObjectInstance=function(e){return Agtk.objectInstances.get(e)}},463:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.getParentObjectInstance=void 0;var o=t(459),i=t(755);n.getParentObjectInstance=function(e){var n
;n="number"==typeof e?(0,o.getObjectInstance)(e):e;var t=(0,i.getParentObjectInstanceId)(n);if(void 0!==t&&-1!==t)return(0,o.getObjectInstance)(t)}},355:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ObjectInstanceAccessorType=void 0,
function(e){e.Switches="switches",e.Variables="variables"}(n.ObjectInstanceAccessorType||(n.ObjectInstanceAccessorType={}))},853:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.resolveId=void 0,n.resolveId=function(e,n,t){
return"string"==typeof t?e[n].getIdByName(t):t}},584:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.getControllerId=void 0;var o=t(179);n.getControllerId=function(e){return parseInt((0,
o.getVariableValue)(e,Agtk.constants.objects.variables.ControllerIDId))}},755:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.getParentObjectInstanceId=void 0;var o=t(179);n.getParentObjectInstanceId=function(e){return(0,
o.getVariableValue)(e,Agtk.constants.objects.variables.ParentObjectInstanceIDId)}},179:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.getVariableValue=void 0;var o=t(355),i=t(853);n.getVariableValue=function(e,n){var t=(0,
i.resolveId)(e,o.ObjectInstanceAccessorType.Variables,n);if(-1!==t)return e.variables.get(t).getValue()}},996:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.createPlugin=void 0;var o=t(898),i=t(73),r=t(46);function a(e,n){
for(var t={},o=0;o<n.length;o++){t[(r=n[o]).id]=r.type===i.AgtkPluginUiParameterType.Json?JSON.stringify(r.defaultValue):r.defaultValue}for(o=0;o<e.length;++o){var r;t[(r=e[o]).id]=r.value}return t}n.createPlugin=function(e,n){
var t,i,c,u={},l=n||{},s=e.parameters||[],d=e.actionCommands||[],f=e.autoTiles||void 0,p=e.linkConditions||[];return l.internalData={},l.localization=(0,r.createPluginLocalizationManager)({localizations:e.localizations}),l.getInfoParameter=function(){
return t||(t=l.localization.processParameterLocale(s)),t},l.getInfoInternal=function(){return JSON.parse(JSON.stringify(l.internalData))},l.getInfoActionCommand=function(){return i||(i=l.localization.processActionCommandLocale(d)),i},
l.getInfoLinkCondition=function(){return c||(c=l.localization.processLinkConditionLocale(p)),c},l.getInfoAutoTile=function(){return f},l.inEditor=function(){return!Agtk||"function"!=typeof Agtk.log},l.inPlayer=function(){
return!!Agtk&&"string"==typeof Agtk.version&&/^player .+$/.test(Agtk.version)},l.normalizeActionCommandParameters=function(e,n){return a(n,u.getInfo(o.AgtkPluginInfoCategory.ActionCommand)[e].parameter)},l.normalizeLinkConditionParameters=function(e,n){
return a(n,u.getInfo(o.AgtkPluginInfoCategory.LinkCondition)[e].parameter)},l.normalizeUiParameters=function(e){return a(e,u.getInfo(o.AgtkPluginInfoCategory.Parameter))},u.setLocale=function(e){l.localization.setLocale(e)},u.getInfo=function(e){var n
;switch(e){case o.AgtkPluginInfoCategory.Name:n=l.localization.get(r.PluginLocalizationRequiredKey.Name);break;case o.AgtkPluginInfoCategory.Description:n=l.localization.get(r.PluginLocalizationRequiredKey.Description);break
;case o.AgtkPluginInfoCategory.Author:n=l.localization.get(r.PluginLocalizationRequiredKey.Author);break;case o.AgtkPluginInfoCategory.Help:n=l.localization.get(r.PluginLocalizationRequiredKey.Help);break;case o.AgtkPluginInfoCategory.Parameter:
n=l.getInfoParameter();break;case o.AgtkPluginInfoCategory.Internal:n=l.getInfoInternal();break;case o.AgtkPluginInfoCategory.ActionCommand:n=l.getInfoActionCommand();break;case o.AgtkPluginInfoCategory.LinkCondition:n=l.getInfoLinkCondition();break
;case o.AgtkPluginInfoCategory.AutoTile:n=l.getInfoAutoTile()}return n},u.initialize=function(e){e&&u.setInternal(e)},u.finalize=function(){},u.setParamValue=function(){},u.setInternal=function(e){
l.internalData=JSON.parse(JSON.stringify(e))||l.internalData},u.call=function(){},u}},445:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.createPluginLocalizationManager=void 0;var o=t(73);n.createPluginLocalizationManager=function(e){
for(var n={},t=e.localizations&&e.localizations.length>0?e.localizations:[{locale:"en",data:{}}],i=t[0].data,r=t[0].locale,a={},c=0;c<t.length;++c)a[t[c].locale]=t[c].data;var u=/^loca\((.+)\)$/;return n.get=function(e){var n=r.substring(0,2)
;return a[n]&&"string"==typeof a[n][e]?a[n][e]:"string"==typeof i[e]?i[e]:"LOCA MISSING: ".concat(e)},n.getLocale=function(){return r},n.setLocale=function(e){return!!a[e.substring(0,2)]&&(r=e,!0)},n.processParameterLocale=function(e){
for(var t=0;t<e.length;++t){var i=e[t],r=i.name.match(u);switch(r&&r.length>1&&(i.name=n.get(r[1])),i.type){case o.AgtkPluginUiParameterType.String:case o.AgtkPluginUiParameterType.MultiLineString:
(r=i.defaultValue.match(u))&&r.length>1&&(i.defaultValue=n.get(r[1]));break;case o.AgtkPluginUiParameterType.CustomId:for(var a=0;a<i.customParam.length;++a){var c=i.customParam[a];(r=c.name.match(u))&&r.length>1&&(c.name=n.get(r[1]))}}}return e},
n.processActionCommandLocale=function(e){for(var t=0;t<e.length;++t){var o=e[t],i=o.name.match(u);i&&i.length>1&&(o.name=n.get(i[1])),(i=o.description.match(u))&&i.length>1&&(o.description=n.get(i[1])),n.processParameterLocale(o.parameter)}return e},
n.processLinkConditionLocale=function(e){for(var t=0;t<e.length;++t){var o=e[t],i=o.name.match(u);i&&i.length>1&&(o.name=n.get(i[1])),(i=o.description.match(u))&&i.length>1&&(o.description=n.get(i[1])),n.processParameterLocale(o.parameter)}return e},n}},
46:function(e,n,t){var o=this&&this.__createBinding||(Object.create?function(e,n,t,o){void 0===o&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,o){void 0===o&&(o=t),e[o]=n[t]
}),i=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||o(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),i(t(445),n),i(t(798),n),i(t(66),n),i(t(96),n),i(t(152),n),i(t(930),n)},
798:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0});t(152)},66:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},96:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},152:function(e,n){
Object.defineProperty(n,"__esModule",{value:!0}),n.PluginLocalizationRequiredKey=void 0,function(e){e.Name="PLUGIN_NAME",e.Description="PLUGIN_DESCRIPTION",e.Author="PLUGIN_AUTHOR",e.Help="PLUGIN_HELP"
}(n.PluginLocalizationRequiredKey||(n.PluginLocalizationRequiredKey={}))},930:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},581:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createResourceCache=void 0,
n.createResourceCache=function(e){var n={},t=e||{};return t.cache={},n.clear=function(){for(var e=Object.keys(t.cache),o=0;o<e.length;++o)delete t.cache[e[o]];return n},n.delete=function(e){return delete t.cache[e],n},n.get=function(e){return t.cache[e]},
n.has=function(e){return!!t.cache[e]},n.set=function(e,o){return t.cache[e]=o,n},n}},125:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.createJsonLogicClauseTransform=void 0;var o=t(791);n.createJsonLogicClauseTransform=function(e){
return function(n){var t=[];function i(){return!1}var r=function n(r,a){if(Array.isArray(r)){var c=e(r);return"string"==typeof c?(t.push("".concat(a,": ").concat(c)),i):c}
if("object"!=typeof r||null===r)return t.push("".concat(a,": Invalid JSON logic clause type; expected object")),i;var u=Object.keys(r)
;if(1!==u.length)return t.push("".concat(a,": Invalid JSON logic connective object; expected only one connective (object key), found ").concat(u.length)),i;var l=u[0],s=r[l],d="".concat(a,".").concat(l)
;if(!Array.isArray(s)||s.length<1)return t.push("".concat(d,": Invalid JSON logic sub-clauses; expected array of length 1 or greater")),i;if(l===o.JsonLogicConnective.Not){
if(s.length>1)return t.push("".concat(d,": Invalid JSON logic sub-clause for ").concat(o.JsonLogicConnective.Not," connective; array of length 1 required")),i;var f=n(s[0],"".concat(d,"[0]"));return function(){
for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!f.apply(void 0,e)}}if(s.length<2)return t.push("".concat(d,": Invalid JSON logic sub-clause for connective; expected array of length 2 or greater")),i;var p=[];switch(l){
case o.JsonLogicConnective.And:case o.JsonLogicConnective.Or:case o.JsonLogicConnective.Nand:case o.JsonLogicConnective.Nor:case o.JsonLogicConnective.Xor:case o.JsonLogicConnective.Xnor:
for(var g=0;g<s.length;++g)p.push(n(s[g],"".concat(d,"[").concat(g,"]")));break;default:return t.push("".concat(d,": Unknown connective: ").concat(l)),i}switch(l){case o.JsonLogicConnective.And:return function(){
for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=0;t<p.length;++t)if(!p[t].apply(p,e))return!1;return!0};case o.JsonLogicConnective.Or:return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]
;for(var t=0;t<p.length;++t)if(p[t].apply(p,e))return!0;return!1};case o.JsonLogicConnective.Nand:return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=0;t<p.length;++t)if(!p[t].apply(p,e))return!0;return!1}
;case o.JsonLogicConnective.Nor:return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=0;t<p.length;++t)if(p[t].apply(p,e))return!1;return!0};case o.JsonLogicConnective.Xor:return function(){
for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=0,o=0;o<p.length;++o)p[o].apply(p,e)&&++t;return t%2==1};case o.JsonLogicConnective.Xnor:return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]
;for(var t=0,o=0;o<p.length;++o)p[o].apply(p,e)&&++t;return t%2==0}}}(n,"ROOT");return t.length?t:r}}},791:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.JsonLogicConnective=void 0,function(e){e.Not="NOT",e.And="AND",e.Or="OR",
e.Nand="NAND",e.Nor="NOR",e.Xor="XOR",e.Xnor="XNOR"}(n.JsonLogicConnective||(n.JsonLogicConnective={}))},34:function(e,n){function t(e){return Array.isArray(e)&&"object"==typeof e}function o(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}
function i(e){return"string"==typeof e}function r(e){return"function"==typeof e}function a(e){return function(e){return void 0===e&&void 0===e}(e)||function(e){return"symbol"==typeof e}(e)}function c(e){return function(e){
return"number"==typeof e&&isNaN(e)}(e)||function(e){return"number"==typeof e&&!isFinite(e)}(e)||function(e){return null===e&&"object"==typeof e}(e)}function u(e,n){var t;return(t=n?e.trimEnd().split(""):e.split("")).pop(),t.join("")+(n?"\n":"")}
Object.defineProperty(n,"__esModule",{value:!0}),n.toJson=void 0,n.toJson=function(e,n,l){var s=[],d="number"==typeof n&&n>=0?n:2;return function e(n,f){if(!a(n)){if(function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getMonth
}(n))return'"'.concat(n.toISOString(),'"');if(c(n))return"".concat(null);if(r(n))return l?(r(n.toString)?n.toString():'"function"').split("\n").join("".concat(d?"\n"+" ".repeat(d):"")):void 0;if(function(e){return function(e){return"number"==typeof e
}(e)||i(e)||function(e){return"boolean"==typeof e}(e)}(n)){var p=i(n)?'"':"";return"".concat(p).concat(n).concat(p)}if(t(n)||o(n)){if(s.indexOf(n)>=0)return'"[seen '.concat(t(n)?"array":"object",']"');s.push(n)}if(t(n)){var g=""
;return n.length?(n.forEach((function(n){g+=" ".repeat(f+d)+(function(e){return c(e)||a(e)}(n)?e(null,f+d):e(n,f+d)),g+=","+(d?"\n":"")})),"[".concat(d?"\n":"").concat(u(g,!!d)).concat(" ".repeat(f),"]")):"[]"}if(o(n)){var I="",_=Object.keys(n)
;return _.length?(_.forEach((function(t){var o=n[t];I+=a(o)?"":"".concat(" ".repeat(f+d),'"').concat(t,'":').concat(d?" ":"").concat(e(o,f+d),",").concat(d?"\n":"")})),"{".concat(d?"\n":"").concat(u(I,!!d)).concat(" ".repeat(f),"}")):"{}"}}}(e,0)}},
804:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUnixTimestamp=void 0,n.getUnixTimestamp=function(){return Math.round(+new Date/1e3)}},898:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),
n.AgtkPluginInfoCategory=void 0,function(e){e.Name="name",e.Description="description",e.Author="author",e.Help="help",e.Parameter="parameter",e.Internal="internal",e.ActionCommand="actionCommand",e.LinkCondition="linkCondition",e.AutoTile="autoTile"
}(n.AgtkPluginInfoCategory||(n.AgtkPluginInfoCategory={}))},73:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AgtkPluginUiParameterType=void 0,function(e){e.String="String",e.MultiLineString="MultiLineString",e.Number="Number",
e.Json="Json",e.ImageId="ImageId",e.TextId="TextId",e.SceneId="SceneId",e.TilesetId="TilesetId",e.AnimationId="AnimationId",e.ObjectId="ObjectId",e.FontId="FontId",e.MovieId="MovieId",e.BgmId="BgmId",e.SeId="SeId",e.VoiceId="VoiceId",
e.VariableId="VariableId",e.SwitchId="SwitchId",e.AnimOnlyId="AnimOnlyId",e.PortalId="PortalId",e.CustomId="CustomId",e.Embedded="Embedded",e.EmbeddedEditable="EmbeddedEditable",e.SwitchVariableObjectId="SwitchVariableObjectId",e.DatabaseId="DatabaseId"
}(n.AgtkPluginUiParameterType||(n.AgtkPluginUiParameterType={}))},263:function(e,n,t){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.createGestaltInputPlugin=void 0
;var i=t(934),r=t(996),a=t(581),c=t(551),u=o(t(923)),l="\nGestalt Input Plugin v".concat("0.2.0","\n");n.createGestaltInputPlugin=function(){var e={},n=(0,r.createPlugin)({localizations:u.default,linkConditions:c.linkConditions},e)
;return e.inputConditionCache=(0,a.createResourceCache)(),n.initialize=function(t){if(t||(t={}),n.setInternal(t),!e.inEditor()){e.allControllerIds=[];for(var o=0;o<=Agtk.controllers.MaxControllerId;++o)e.allControllerIds.push(o);e.logger=(0,
i.createLogger)({runtimeLog:function(e){Agtk.log("[Gestalt Input Plugin] ".concat(e))}}),Agtk.log(l)}},n.execLinkCondition=function(n,t,o,i,r){return(0,c.execLinkCondition)(e,n,e.normalizeLinkConditionParameters(n,t),o,i,r)},n}},875:function(e,n,t){
Object.defineProperty(n,"__esModule",{value:!0}),n.execLinkCondition=void 0;var o=t(474),i=t(828),r=t(245);n.execLinkCondition=function(e,n,t,a,c,u){if(n===i.linkConditionIndexMap[o.LinkConditionId.InputCondition])return(0,
r.execInputConditionLinkCondition)(e,t,a,c,u);var l="{linkConditionIndex: ".concat(n,", objectId: ").concat(a,", instanceId: ").concat(c,", actionLinkId: ").concat(u,"}")
;return e.logger.warn("execLinkCondition ".concat(l,": No matching link condition found; defaulting to false")),!1}},551:function(e,n,t){var o=this&&this.__createBinding||(Object.create?function(e,n,t,o){void 0===o&&(o=t),Object.defineProperty(e,o,{
enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,o){void 0===o&&(o=t),e[o]=n[t]}),i=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||o(n,e,t)};Object.defineProperty(n,"__esModule",{
value:!0}),i(t(875),n),i(t(474),n),i(t(828),n),i(t(138),n)},770:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ControllerConstantPrefix=void 0,function(e){e.Op="OperationKey",e.Pc="ReservedKeyCodePc_"
}(n.ControllerConstantPrefix||(n.ControllerConstantPrefix={}))},589:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.execInputConditionLinkCondition=void 0;var o=t(344),i=t(944),r=t(353)
;n.execInputConditionLinkCondition=function(e,n,t,a,c){var u=(n[i.InputConditionParameterId.Identifier]||"").trim()
;if(!u)return e.logger.warn("testInputCondition {objectId: ".concat(t,", instanceId: ").concat(a,", actionLinkId: ").concat(c,"}: Unset identifier; defaulting to false")),!1;var l,s="".concat(t,",").concat(a,",").concat(u)
;e.inputConditionCache.has(s)?l=e.inputConditionCache.get(s):(l=(0,r.parseInputConditionParameters)(e,n),e.inputConditionCache.set(s,l));var d=l[0],f=l[1],p=(0,o.fetchControllerId)(t,a);if(p<0&&f===i.InputConditionFallbackParameterId.AlwaysFalse)return!1
;for(var g=p>=0?[p]:e.allControllerIds,I=0;I<g.length;++I)if(d(g[I]))return!0;return!1}},344:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchControllerId=void 0;var o=t(459),i=t(463),r=t(584);n.fetchControllerId=function e(n,t){
var a=Agtk.objects.get(n),c=(0,o.getObjectInstance)(t),u=(0,r.getControllerId)(c);if(a.operatable&&u>=0)return u;var l=(0,i.getParentObjectInstance)(c);return l?e(l.objectId,l.id):-1}},245:function(e,n,t){
var o=this&&this.__createBinding||(Object.create?function(e,n,t,o){void 0===o&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,o){void 0===o&&(o=t),e[o]=n[t]}),i=this&&this.__exportStar||function(e,n){
for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||o(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),i(t(589),n),i(t(169),n),i(t(944),n)},169:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},391:function(e,n){
Object.defineProperty(n,"__esModule",{value:!0}),n.InputKeyPrefix=void 0,function(e){e.Op="Op",e.Pc="Pc"}(n.InputKeyPrefix||(n.InputKeyPrefix={}))},745:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InputKey=void 0,function(e){
e.Op_A="Op_A",e.Op_B="Op_B",e.Op_X="Op_X",e.Op_Y="Op_Y",e.Op_R1="Op_R1",e.Op_R2="Op_R2",e.Op_L1="Op_L1",e.Op_L2="Op_L2",e.Op_Up="Op_Up",e.Op_Down="Op_Down",e.Op_Left="Op_Left",e.Op_Right="Op_Right",e.Op_LeftStickUp="Op_LeftStickUp",
e.Op_LeftStickDown="Op_LeftStickDown",e.Op_LeftStickLeft="Op_LeftStickLeft",e.Op_LeftStickRight="Op_LeftStickRight",e.Op_RightStickUp="Op_RightStickUp",e.Op_RightStickDown="Op_RightStickDown",e.Op_RightStickLeft="Op_RightStickLeft",
e.Op_RightStickRight="Op_RightStickRight",e.Op_LeftClick="Op_LeftClick",e.Op_RightClick="Op_RightClick",e.Op_Start="Op_Start",e.Op_Select="Op_Select",e.Op_Home="Op_Home",e.Op_Ok="Op_Ok",e.Op_Cancel="Op_Cancel",e.Pc_W="Pc_W",e.Pc_A="Pc_A",e.Pc_S="Pc_S",
e.Pc_D="Pc_D",e.Pc_LeftClick="Pc_LeftClick",e.Pc_RightClick="Pc_RightClick",e.Pc_Up="Pc_Up",e.Pc_Right="Pc_Right",e.Pc_Down="Pc_Down",e.Pc_Left="Pc_Left",e.Pc_MiddleClick="Pc_MiddleClick",e.Pc_WheelUp="Pc_WheelUp",e.Pc_WhellDown="Pc_WhellDown",
e.Pc_MousePointer="Pc_MousePointer"}(n.InputKey||(n.InputKey={}))},944:function(e,n,t){var o=this&&this.__createBinding||(Object.create?function(e,n,t,o){void 0===o&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return n[t]}})
}:function(e,n,t,o){void 0===o&&(o=t),e[o]=n[t]}),i=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||o(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),i(t(546),n),i(t(573),n),
i(t(108),n)},546:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InputConditionFallbackParameterId=void 0,function(e){e[e.Default=1]="Default",e[e.AlwaysFalse=2]="AlwaysFalse"
}(n.InputConditionFallbackParameterId||(n.InputConditionFallbackParameterId={}))},573:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InputConditionParameterId=void 0,function(e){e[e.Json=1]="Json",e[e.Fallback=2]="Fallback",
e[e.Identifier=3]="Identifier"}(n.InputConditionParameterId||(n.InputConditionParameterId={}))},108:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.inputConditionParameters=void 0;var o=t(73),i=t(546),r=t(573)
;n.inputConditionParameters=[{id:r.InputConditionParameterId.Identifier,name:"loca(LINK_CONDITION_INPUT_CONDITION_PARAMETER_IDENTIFIER_NAME)",type:o.AgtkPluginUiParameterType.String,
defaultValue:"loca(LINK_CONDITION_INPUT_CONDITION_PARAMETER_IDENTIFIER_DEFAULT_VALUE)"},{id:r.InputConditionParameterId.Json,name:"loca(LINK_CONDITION_INPUT_CONDITION_PARAMETER_JSON_NAME)",type:o.AgtkPluginUiParameterType.Json,defaultValue:["Op_A",!0]},{
id:r.InputConditionParameterId.Fallback,name:"loca(LINK_CONDITION_INPUT_CONDITION_PARAMETER_FALLBACK_NAME)",type:o.AgtkPluginUiParameterType.CustomId,customParam:[{id:i.InputConditionFallbackParameterId.Default,
name:"loca(LINK_CONDITION_INPUT_CONDITION_PARAMETER_FALLBACK_PARAM_DEFAULT_NAME)"},{id:i.InputConditionFallbackParameterId.AlwaysFalse,name:"loca(LINK_CONDITION_INPUT_CONDITION_PARAMETER_FALLBACK_PARAM_ALWAYS_FALSE_NAME)"}],
defaultValue:i.InputConditionFallbackParameterId.Default}]},353:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.parseInputConditionParameters=void 0;var o=t(944),i=t(864);n.parseInputConditionParameters=function(e,n){
var t=n[o.InputConditionParameterId.Json],r=n[o.InputConditionParameterId.Fallback],a=n[o.InputConditionParameterId.Identifier],c=JSON.parse(t),u=(0,i.transformInputClause)(c);if(Array.isArray(u)){
e.logger.error("parseInputConditionParameters ".concat(a,": Invalid JSON logic detected:\n").concat(u.join("\n  - ")));var l=!1;return[function(){
return l||(e.logger.warn("".concat(a,": Invalid input condition; defaulting to false & suppressing this message")),l=!0),!1},r]}return[u,r]}},864:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.transformInputClause=void 0
;var o=t(125),i=t(365),r=t(863);n.transformInputClause=(0,o.createJsonLogicClauseTransform)((function(e){var n=(0,r.validateInputCondition)(e);return!0!==n?n:(0,i.transformInputCondition)(e)}))},365:function(e,n,t){Object.defineProperty(n,"__esModule",{
value:!0}),n.transformInputCondition=void 0;var o=t(770),i=t(391);n.transformInputCondition=function(e){var n=e[0],t=e[1],r=n.split("_"),a=r[0]===i.InputKeyPrefix.Pc?o.ControllerConstantPrefix.Pc:o.ControllerConstantPrefix.Op,c="".concat(a).concat(r[1])
;return r[0]===i.InputKeyPrefix.Pc?function(e){var n=!!Agtk.controllers.getKeyValue(e,Agtk.constants.controllers[c]);return t?n:!n}:function(e){var n=Agtk.controllers.getOperationKeyPressed(e,Agtk.constants.controllers[c]);return t?n:!n}}},
863:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.validateInputCondition=void 0;var o=t(745);n.validateInputCondition=function(e){
return Array.isArray(e)?2!==e.length?"Input condition condition must be of type array with exact length of 2":"string"!=typeof e[0]?"Input condition condition must be of type array with first element of type string":"string"!=typeof o.InputKey[e[0]]?"Input condition condition must be of type array with valid first element: '".concat(e[0],"' is invalid"):"boolean"==typeof e[1]||"Input condition condition must be of type array with second element of type boolean":"Input condition condition must be of type array"
}},474:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LinkConditionId=void 0,function(e){e[e.InputCondition=1]="InputCondition"}(n.LinkConditionId||(n.LinkConditionId={}))},828:function(e,n,t){Object.defineProperty(n,"__esModule",{
value:!0}),n.linkConditionIndexMap=void 0;var o=t(138);n.linkConditionIndexMap={};for(var i=0;i<o.linkConditions.length;++i)n.linkConditionIndexMap[o.linkConditions[i].id]=i},138:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),
n.linkConditions=void 0;var o=t(245),i=t(474);n.linkConditions=[{id:i.LinkConditionId.InputCondition,name:"loca(LINK_CONDITION_INPUT_CONDITION_NAME)",description:"loca(LINK_CONDITION_INPUT_CONDITION_DESCRIPTION)",parameter:o.inputConditionParameters}]},
562:function(e,n,t){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var i=o(t(950));i.default.PLUGIN_HELP=t(639),n.default={locale:"en",data:i.default}},
923:function(e,n,t){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var i=o(t(562));n.default=[i.default]},639:function(e){
e.exports="# Gestalt Input Plugin\n\nAn alternative way to define input link conditions with the following:\n\n-   JSON specification that maps an input key (`OperationKey` or `ReservedKeyCodePc`) to either a pressed (`true`) or released (`false`) state.\n    -   Available logic connectives: `NOT`, `AND`, `OR`, `NAND`, `NOR`, `XOR`, & `XNOR`.\n    -   Any errors in the input specification are output to the player's \"Runtime Console Log\"; an input condition will always return `false` in this case.\n-   Resolves any object instance to an operable controller.\n    -   Configurable fallback behavior when a controller is not found.\n\nThese features can open up new approaches to how you can structure your PGMMV games.\n\n> **⚠️Important⚠️**\n>\n> Make sure you setup up your controllable players as `Starting Points` in your scenes. Check out [baz](https://bazratcreates.itch.io/)'s [Multiplayer & Controller ID Setup tutorial](https://www.youtube.com/watch?v=FVp2UVoNpqc) for more details!\n\n## Link Condition Parameters\n\n-   **Gestalt Input Condition**\n    -   `Input Condition Identifier`: Non-empty string unique to the object.\n    -   `Input Condition JSON`: Domain specific JSON mapping input key to pressed/released state.\n    -   `Controller Fallback`: Define how this input condition behaves when no operable controller is found.\n        -   `ANY CONTROLLER`: Polls all controller IDs for first input condition satisfaction found. This is the default behavior for non-starting point objects.\n        -   `ALWAYS FALSE`: The link condition will never resolve to true.\n\n## Example Input Condition JSON\n\n`true` only when `Up Right` on the `Left Stick` is being pressed:\n\n```\n{\n  \"AND\": [\n    [\"Op_LeftStickDown\", false],\n    [\"Op_LeftStickUp\", true],\n    [\"Op_LeftStickRight\", true],\n    [\"Op_LeftStickLeft\", false]\n  ]\n}\n```\n\n`true` only when any direction other than `Up Right` is being pressed on the `Left Stick`:\n\n```\n{\n  \"OR\": [\n    {\n      \"AND\": [\n        [\"Op_LeftStickUp\", false],\n        {\n          \"OR\": [\n            [\"Op_LeftStickRight\", true],\n            [\"Op_LeftStickDown\", true],\n            [\"Op_LeftStickLeft\", true]\n          ]\n        }\n      ]\n    },\n    {\n      \"AND\": [\n        [\"Op_LeftStickRight\", false],\n        {\n          \"OR\": [\n            [\"Op_LeftStickDown\", true],\n            [\"Op_LeftStickUp\", true],\n            [\"Op_LeftStickLeft\", true]\n          ]\n        }\n      ]\n    }\n  ]\n}\n```\n\n## Input Condition JSON EBNF\n\n[Extended Backus-Naur form](https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form) representation:\n\n```\nclause       = not clause | and clause | or clause | nand clause | nor clause | xor clause | xnor clause | condition ;\nclause array = '[' , clauses , ']' ;\nclauses      = clause [ , ',' , clauses ] ;\nnot clause   = '{' , '\"NOT\"' , ':' , '[' , clause , ']', '}' ;\nand clause   = '{' , '\"AND\"' , ':' , clause array '}' ;\nor clause    = '{' , '\"OR\"' , ':' , clause array '}' ;\nnand clause  = '{' , '\"NAND\"' , ':' , clause array '}' ;\nnor clause   = '{' , '\"NOR\"' , ':' , clause array '}' ;\nxor clause   = '{' , '\"XOR\"' , ':' , clause array '}' ;\nxnor clause  = '{' , '\"XNOR\"' , ':' , clause array '}' ;\ncondition    = '[' , key , ',' , boolean , ']' ;\nboolean      = 'true' | 'false' ;\nkey          =\n    | '\"Op_A\"'\n    | '\"Op_B\"'\n    | '\"Op_X\"'\n    | '\"Op_Y\"'\n    | '\"Op_R1\"'\n    | '\"Op_R2\"'\n    | '\"Op_L1\"'\n    | '\"Op_L2\"'\n    | '\"Op_Up\"'\n    | '\"Op_Down\"'\n    | '\"Op_Left\"'\n    | '\"Op_Right\"'\n    | '\"Op_LeftStickUp\"'\n    | '\"Op_LeftStickDown\"'\n    | '\"Op_LeftStickLeft\"'\n    | '\"Op_LeftStickRight\"'\n    | '\"Op_RightStickUp\"'\n    | '\"Op_RightStickDown\"'\n    | '\"Op_RightStickLeft\"'\n    | '\"Op_RightStickRight\"'\n    | '\"Op_LeftClick\"'\n    | '\"Op_RightClick\"'\n    | '\"Op_Start\"'\n    | '\"Op_Select\"'\n    | '\"Op_Home\"'\n    | '\"Op_Ok\"'\n    | '\"Op_Cancel\"'\n    | '\"Pc_W\"'\n    | '\"Pc_A\"'\n    | '\"Pc_S\"'\n    | '\"Pc_D\"'\n    | '\"Pc_LeftClick\"'\n    | '\"Pc_RightClick\"'\n    | '\"Pc_Up\"'\n    | '\"Pc_Right\"'\n    | '\"Pc_Down\"'\n    | '\"Pc_Left\"'\n    | '\"Pc_MiddleClick\"'\n    | '\"Pc_WheelUp\"'\n    | '\"Pc_WhellDown\"'\n    | '\"Pc_MousePointer\"'\n    ;\n```\n\n## Notes\n\n-   **Input Condition JSON**: Parsed **once** (into a function) and then cached. Cache keys are constructed from the current `objectId`, `instanceId`, and user specified `Input Condition Identifier`; thus the `Input Condition Identifier` must be unique to the object/instance - no runtime checks are performed for correctness here (other than ensuring the identifier is a non-empty string).\n\n    -   While the editor takes care of validating the _structure_ any input JSON, additional checks are performed to ensure the JSON conforms to our _grammar_. Any errors are logged and the affected input condition will always return false.\n\n-   **Controller IDs**: Fetched on each link condition test as follows:\n\n    1. Current object is checked if `operable` and its instance's built-in `Controller ID` variable value is a valid controller ID.\n    2. When controller ID value is invalid, traverse to the instance's parent object instance (if it exists) and repeat step 1.\n    3. If search is exhausted (ie. no valid controller ID and no more ancestors to check), use specified fallback setting for this link condition.\n\n    We perform this search each time in case a child object gets swapped out to a different 'operable object hierarchy' during the course of gameplay. Beware of this when building objects that make of use of `Common Actions` with this link condition.\n\n> _gestalt_ - _an organized whole that is perceived as more than the sum of its parts._\n"
},950:function(e){
e.exports=JSON.parse('{"PLUGIN_NAME":"Gestalt Input","PLUGIN_DESCRIPTION":"Input condition with JSON; Resolves to an operable controller*.","PLUGIN_AUTHOR":"kidthales <kidthales@agogpixel.com>","PLUGIN_HELP":"See help.md","LINK_CONDITION_INPUT_CONDITION_NAME":"Gestalt Input Condition","LINK_CONDITION_INPUT_CONDITION_DESCRIPTION":"Input condition with JSON; Resolves to an operable controller*.","LINK_CONDITION_INPUT_CONDITION_PARAMETER_JSON_NAME":"Input Condition JSON","LINK_CONDITION_INPUT_CONDITION_PARAMETER_FALLBACK_NAME":"Controller Fallback","LINK_CONDITION_INPUT_CONDITION_PARAMETER_FALLBACK_PARAM_DEFAULT_NAME":"ANY CONTROLLER","LINK_CONDITION_INPUT_CONDITION_PARAMETER_FALLBACK_PARAM_ALWAYS_FALSE_NAME":"ALWAYS FALSE","LINK_CONDITION_INPUT_CONDITION_PARAMETER_IDENTIFIER_NAME":"Input Condition Identifier","LINK_CONDITION_INPUT_CONDITION_PARAMETER_IDENTIFIER_DEFAULT_VALUE":"Unique To Object"}')
}},n={};function t(o){var i=n[o];if(void 0!==i)return i.exports;var r=n[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}
return(0,t(263).createGestaltInputPlugin)()}();
}());