/**
 * Gestalt Input Plugin for Pixel Game Maker MV.
 * Copyright 2022 AgogPixel - All Rights Reserved.
 * Implemented by kidthales <kidthales@agogpixel.com>
 * This file is released under CC BY-ND 4.0 license: https://creativecommons.org/licenses/by-nd/4.0/
 */
(function() {
return function(){"use strict";var e={5885:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.JsonLogicConnective=void 0,function(e){e.Not="NOT",e.And="AND",e.Or="OR",e.Nand="NAND",e.Nor="NOR",e.Xor="XOR",e.Xnor="XNOR"
}(n.JsonLogicConnective||(n.JsonLogicConnective={}))},9480:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.createJsonLogicClauseTransform=void 0;var o=t(5885);n.createJsonLogicClauseTransform=function(e){return function(n){var t=[]
;function i(){return!1}var r=function n(r,a){if(Array.isArray(r)){var c=e(r);return"string"==typeof c?(t.push("".concat(a,": ").concat(c)),i):c}
if("object"!=typeof r||null===r)return t.push("".concat(a,": Invalid JSON logic clause type; expected object")),i;var u=Object.keys(r)
;if(1!==u.length)return t.push("".concat(a,": Invalid JSON logic connective object; expected only one connective (object key), found ").concat(u.length)),i;var l=u[0],s=r[l],f="".concat(a,".").concat(l)
;if(!Array.isArray(s)||s.length<1)return t.push("".concat(f,": Invalid JSON logic sub-clauses; expected array of length 1 or greater")),i;if(l===o.JsonLogicConnective.Not){
if(s.length>1)return t.push("".concat(f,": Invalid JSON logic sub-clause for ").concat(o.JsonLogicConnective.Not," connective; array of length 1 required")),i;var d=n(s[0],"".concat(f,"[0]"));return function(){
for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!d.apply(void 0,e)}}if(s.length<2)return t.push("".concat(f,": Invalid JSON logic sub-clause for connective; expected array of length 2 or greater")),i;var p=[];switch(l){
case o.JsonLogicConnective.And:case o.JsonLogicConnective.Or:case o.JsonLogicConnective.Nand:case o.JsonLogicConnective.Nor:case o.JsonLogicConnective.Xor:case o.JsonLogicConnective.Xnor:
for(var g=0;g<s.length;++g)p.push(n(s[g],"".concat(f,"[").concat(g,"]")));break;default:return t.push("".concat(f,": Unknown connective: ").concat(l)),i}switch(l){case o.JsonLogicConnective.And:return function(){
for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=0;t<p.length;++t)if(!p[t].apply(p,e))return!1;return!0};case o.JsonLogicConnective.Or:return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]
;for(var t=0;t<p.length;++t)if(p[t].apply(p,e))return!0;return!1};case o.JsonLogicConnective.Nand:return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=0;t<p.length;++t)if(!p[t].apply(p,e))return!0;return!1}
;case o.JsonLogicConnective.Nor:return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=0;t<p.length;++t)if(p[t].apply(p,e))return!1;return!0};case o.JsonLogicConnective.Xor:return function(){
for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=0,o=0;o<p.length;++o)p[o].apply(p,e)&&++t;return t%2==1};case o.JsonLogicConnective.Xnor:return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n]
;for(var t=0,o=0;o<p.length;++o)p[o].apply(p,e)&&++t;return t%2==0}}}(n,"ROOT");return t.length?t:r}}},3:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.createLogger=void 0;var o=t(4714),i=t(3746),r=t(204);n.createLogger=function(e,n){
var t,a={},c=n||{};function u(e,n,t){return e<n?n:e>t?t:e}return c.logLevel=e.logLevel||r.LogLevel.Info,c.runtimeLog=e.runtimeLog||Agtk.log,c.jsonIndentSize="number"!=typeof e.jsonIndentSize?2:u(e.jsonIndentSize,0,8),
c.jsonStringifyFunctions=!!e.jsonStringifyFunctions||false,c.logLevelMap=e.logLevelMap||((t={})[r.LogLevel.Debug]=r.LogLevel[r.LogLevel.Debug],t[r.LogLevel.Info]=r.LogLevel[r.LogLevel.Info],t[r.LogLevel.Warn]=r.LogLevel[r.LogLevel.Warn],
t[r.LogLevel.Error]=r.LogLevel[r.LogLevel.Error],t[r.LogLevel.Fatal]=r.LogLevel[r.LogLevel.Fatal],t),a.log=function(e,n){if("string"==typeof n||"number"==typeof n){var t="string"==typeof n?r.LogLevel[n]:n;if(!(t<c.logLevel)){var a="string"==typeof e?e:(0,
i.toJson)(e,c.jsonIndentSize,c.jsonStringifyFunctions),u="[".concat((0,o.getUnixTimestamp)(),"] ").concat(c.logLevelMap[t],": ").concat(a);c.runtimeLog(u)}}else c.runtimeLog("string"==typeof e?e:(0,i.toJson)(e,c.jsonIndentSize,c.jsonStringifyFunctions))},
a.debug=function(e){a.log(e,r.LogLevel.Debug)},a.info=function(e){a.log(e,r.LogLevel.Info)},a.warn=function(e){a.log(e,r.LogLevel.Warn)},a.error=function(e){a.log(e,r.LogLevel.Error)},a.fatal=function(e){a.log(e,r.LogLevel.Fatal)},
a.getLogLevel=function(){return c.logLevel},a.setLogLevel=function(e){return c.logLevel=e,a},a.getRuntimeLog=function(){return c.runtimeLog},a.setRuntimeLog=function(e){return c.runtimeLog=e,a},a.getJsonIndentSize=function(){return c.jsonIndentSize},
a.setJsonIndentSize=function(e){return c.jsonIndentSize=u(e,0,8),a},a.getJsonStringifyFunctions=function(){return c.jsonStringifyFunctions},a.setJsonStringifyFunctions=function(e){return c.jsonStringifyFunctions=e,a},a.getLogLevelMap=function(){
return c.logLevelMap},a.setLogLevelMap=function(e){return c.logLevelMap=e,a},a}},204:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=void 0,function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",
e[e.Error=3]="Error",e[e.Fatal=4]="Fatal"}(n.LogLevel||(n.LogLevel={}))},517:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.getControllerId=void 0;var o=t(4529);n.getControllerId=function(e){return parseInt((0,
o.getVariableValue)(e,Agtk.constants.objects.variables.ControllerIDId))}},4718:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getObjectInstance=void 0,n.getObjectInstance=function(e){return Agtk.objectInstances.get(e)}},
2729:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.getParentObjectInstanceId=void 0;var o=t(4529);n.getParentObjectInstanceId=function(e){return(0,o.getVariableValue)(e,Agtk.constants.objects.variables.ParentObjectInstanceIDId)}},
9986:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.getParentObjectInstance=void 0;var o=t(4718),i=t(2729);n.getParentObjectInstance=function(e){var n;n="number"==typeof e?(0,o.getObjectInstance)(e):e;var t=(0,
i.getParentObjectInstanceId)(n);if(-1!==t)return(0,o.getObjectInstance)(t)}},4529:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.getVariableValue=void 0;var o=t(5390);n.getVariableValue=function(e,n){return e.variables.get((0,
o.resolveId)(e,"variables",n)).getValue()}},5390:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.resolveId=void 0,n.resolveId=function(e,n,t){return"string"==typeof t?e[n].getIdByName(t):t}},797:function(e,n,t){
Object.defineProperty(n,"__esModule",{value:!0}),n.createPlugin=void 0;var o=t(4303),i=t(9046);n.createPlugin=function(e,n){var t,r,a,c={},u=n||{},l=e.parameters||[],s=e.actionCommands||[],f=e.autoTiles||void 0,d=e.linkConditions||[]
;return u.internalData={},u.localization=(0,i.createPluginLocalizationManager)({localizations:e.localizations}),u.getInfoParameter=function(){return t||(t=u.localization.processParameterLocale(l)),t},u.getInfoInternal=function(){
return JSON.parse(JSON.stringify(u.internalData))},u.getInfoActionCommand=function(){return r||(r=u.localization.processExecuteCommandLocale(s)),r},u.getInfoLinkCondition=function(){return a||(a=u.localization.processLinkConditionLocale(d)),a},
u.getInfoAutoTile=function(){return f},u.inEditor=function(){return!Agtk||"function"!=typeof Agtk.log},u.inPlayer=function(){return Agtk&&"string"==typeof Agtk.version&&/^player .+$/.test(Agtk.version)},c.setLocale=function(e){u.localization.setLocale(e)
},c.getInfo=function(e){var n;switch(e){case o.AgtkPluginInfoCategory.Name:n=u.localization.get(i.PluginLocalizationRequiredKey.Name);break;case o.AgtkPluginInfoCategory.Description:n=u.localization.get(i.PluginLocalizationRequiredKey.Description);break
;case o.AgtkPluginInfoCategory.Author:n=u.localization.get(i.PluginLocalizationRequiredKey.Author);break;case o.AgtkPluginInfoCategory.Help:n=u.localization.get(i.PluginLocalizationRequiredKey.Help);break;case o.AgtkPluginInfoCategory.Parameter:
n=u.getInfoParameter();break;case o.AgtkPluginInfoCategory.Internal:n=u.getInfoInternal();break;case o.AgtkPluginInfoCategory.ActionCommand:n=u.getInfoActionCommand();break;case o.AgtkPluginInfoCategory.LinkCondition:n=u.getInfoLinkCondition();break
;case o.AgtkPluginInfoCategory.AutoTile:n=u.getInfoAutoTile()}return n},c.initialize=function(e){e&&c.setInternal(e)},c.finalize=function(){},c.setParamValue=function(){},c.setInternal=function(e){
u.internalData=JSON.parse(JSON.stringify(e))||u.internalData},c.call=function(){},c}},2103:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.createPluginLocalizationManager=void 0;var o=t(9073)
;n.createPluginLocalizationManager=function(e){for(var n={},t=e.localizations&&e.localizations.length>0?e.localizations:[{locale:"en",data:{}}],i=t[0].data,r=t[0].locale,a={},c=0;c<t.length;++c)a[t[c].locale]=t[c].data;var u=/^loca\((.+)\)$/
;return n.get=function(e){return a[r]&&"string"==typeof a[r][e]?a[r][e]:"string"==typeof i[e]?i[e]:"LOCA MISSING: ".concat(e)},n.getLocale=function(){return r},n.setLocale=function(e){return!a[e]&&(r=e,!0)},n.processParameterLocale=function(e){
for(var t=0;t<e.length;++t){var i=e[t],r=i.name.match(u);switch(r&&r.length>1&&(i.name=n.get(r[1])),i.type){case o.AgtkPluginUiParameterType.String:case o.AgtkPluginUiParameterType.MultiLineString:
(r=i.defaultValue.match(u))&&r.length>1&&(i.defaultValue=n.get(r[1]));break;case o.AgtkPluginUiParameterType.CustomId:for(var a=0;a<i.customParam.length;++a){var c=i.customParam[a];(r=c.name.match(u))&&r.length>1&&(c.name=n.get(r[1]))}}}return e},
n.processExecuteCommandLocale=function(e){for(var t=0;t<e.length;++t){var o=e[t],i=o.name.match(u);i&&i.length>1&&(o.name=n.get(i[1])),(i=o.description.match(u))&&i.length>1&&(o.description=n.get(i[1])),n.processParameterLocale(o.parameter)}return e},
n.processLinkConditionLocale=function(e){for(var t=0;t<e.length;++t){var o=e[t],i=o.name.match(u);i&&i.length>1&&(o.name=n.get(i[1])),(i=o.description.match(u))&&i.length>1&&(o.description=n.get(i[1])),n.processParameterLocale(o.parameter)}return e},n}},
3183:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0});t(7409)},9046:function(e,n,t){var o=this&&this.__createBinding||(Object.create?function(e,n,t,o){void 0===o&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return n[t]}})
}:function(e,n,t,o){void 0===o&&(o=t),e[o]=n[t]}),i=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||o(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),i(t(2103),n),i(t(2600),n),
i(t(3183),n),i(t(5690),n),i(t(3213),n),i(t(7409),n)},2600:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},3213:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},5690:function(e,n){Object.defineProperty(n,"__esModule",{
value:!0})},7409:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PluginLocalizationRequiredKey=void 0,function(e){e.Name="PLUGIN_NAME",e.Description="PLUGIN_DESCRIPTION",e.Author="PLUGIN_AUTHOR",e.Help="PLUGIN_HELP"
}(n.PluginLocalizationRequiredKey||(n.PluginLocalizationRequiredKey={}))},5919:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createResourceCache=void 0,n.createResourceCache=function(e){var n={},t=e||{};return t.cache={},
n.clear=function(){for(var e=Object.keys(t.cache),o=0;o<e.length;++o)delete t.cache[e[o]];return n},n.delete=function(e){return delete t.cache[e],n},n.get=function(e){return t.cache[e]},n.has=function(e){return!!t.cache[e]},n.set=function(e,o){
return t.cache[e]=o,n},n}},3746:function(e,n){function t(e){return Array.isArray(e)&&"object"==typeof e}function o(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function i(e){return"string"==typeof e}function r(e){
return null===e&&"object"==typeof e}function a(e){return"number"==typeof e&&isNaN(e)}function c(e){return"number"==typeof e&&!isFinite(e)}function u(e){return"function"==typeof e}function l(e){return"symbol"==typeof e}function s(e){return function(e){
return void 0===e&&void 0===e}(e)||l(e)}function f(e,n){var t;return(t=n?e.trimRight().split(""):e.split("")).pop(),t.join("")+(n?"\n":"")}Object.defineProperty(n,"__esModule",{value:!0}),n.toJson=void 0,n.toJson=function(e,n,d){
var p=[],g="number"==typeof n&&n>=0?n:2;return function e(n,_){var v;if(!s(n)){if(function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getMonth}(n))return'"'.concat(n.toISOString(),'"');if(function(e){return a(e)||c(e)||r(e)
}(n))return"".concat(null);if(!l(n))if(u(n)){if(d){var I=null===(v=u(null==n?void 0:n.toString)?null==n?void 0:n.toString():"function")||void 0===v?void 0:v.split("\n");return null==I?void 0:I.join("".concat(g?"\n"+" ".repeat(g):""))}}else{if(function(e){
return function(e){return"number"==typeof e}(e)||i(e)||function(e){return"boolean"==typeof e}(e)}(n)){var O=i(n)?'"':"";return"".concat(O).concat(n).concat(O)}if(t(n)||o(n)){if(p.indexOf(n)>=0)return"[seen ".concat(t(n)?"array":"object","]");p.push(n)}
if(t(n)){var P="";return n.forEach((function(n){P+=" ".repeat(_+g)+(function(e){return a(e)||c(e)||r(e)||s(e)}(n)?e(null,_+g):e(n,_+g)),P+=","+(g?"\n":"")})),"[".concat(g?"\n":"").concat(f(P,!!g)).concat(" ".repeat(_),"]")}if(o(n)){var h=""
;return Object.keys(n).forEach((function(t){var o=n[t];h+=s(o)?"":"".concat(" ".repeat(_+g),'"').concat(t,'":').concat(g?" ":"").concat(e(o,_+g),",").concat(g?"\n":"")})),"{".concat(g?"\n":"").concat(f(h,!!g)).concat(" ".repeat(_),"}")}}}}(e,0)}},
4714:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUnixTimestamp=void 0,n.getUnixTimestamp=function(){return Math.round(+new Date/1e3)}},5609:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},4050:function(e,n){
Object.defineProperty(n,"__esModule",{value:!0})},4303:function(e,n,t){var o=this&&this.__createBinding||(Object.create?function(e,n,t,o){void 0===o&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,o){
void 0===o&&(o=t),e[o]=n[t]}),i=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||o(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),i(t(5609),n),i(t(4050),n),i(t(5744),n),i(t(7306),n),
i(t(2135),n),i(t(6749),n),i(t(6910),n),i(t(2898),n),i(t(8970),n),i(t(3701),n),i(t(1686),n),i(t(9268),n),i(t(8878),n),i(t(6459),n),i(t(6771),n),i(t(3082),n),i(t(9073),n),i(t(310),n)},5744:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},
2135:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},6749:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},2898:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AgtkPluginInfoCategory=void 0,function(e){
e.Name="name",e.Description="description",e.Author="author",e.Help="help",e.Parameter="parameter",e.Internal="internal",e.ActionCommand="actionCommand",e.LinkCondition="linkCondition",e.AutoTile="autoTile"
}(n.AgtkPluginInfoCategory||(n.AgtkPluginInfoCategory={}))},6910:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},8970:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},1686:function(e,n){Object.defineProperty(n,"__esModule",{
value:!0})},3701:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},9268:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},8878:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},6459:function(e,n){
Object.defineProperty(n,"__esModule",{value:!0})},6771:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},9073:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AgtkPluginUiParameterType=void 0,function(e){e.String="String",
e.MultiLineString="MultiLineString",e.Number="Number",e.Json="Json",e.ImageId="ImageId",e.TextId="TextId",e.SceneId="SceneId",e.TilesetId="TilesetId",e.AnimationId="AnimationId",e.ObjectId="ObjectId",e.FontId="FontId",e.MovieId="MovieId",e.BgmId="BgmId",
e.SeId="SeId",e.VoiceId="VoiceId",e.VariableId="VariableId",e.SwitchId="SwitchId",e.AnimOnlyId="AnimOnlyId",e.PortalId="PortalId",e.CustomId="CustomId",e.Embedded="Embedded",e.EmbeddedEditable="EmbeddedEditable",
e.SwitchVariableObjectId="SwitchVariableObjectId",e.DatabaseId="DatabaseId"}(n.AgtkPluginUiParameterType||(n.AgtkPluginUiParameterType={}))},3082:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},310:function(e,n){
Object.defineProperty(n,"__esModule",{value:!0})},7306:function(e,n){Object.defineProperty(n,"__esModule",{value:!0})},5289:function(e,n,t){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}}
;Object.defineProperty(n,"__esModule",{value:!0}),n.createGestaltInputPlugin=void 0
;var i=t(3),r=t(517),a=t(4718),c=t(9986),u=t(797),l=t(5919),s=t(8337),f=t(3130),d=o(t(2923)),p="\nGestalt Input Plugin v".concat("0.1.0","\nCopyright 2022 AgogPixel - All Rights Reserved\n");n.createGestaltInputPlugin=function(){var e,n,t={},o=(0,
u.createPlugin)({localizations:d.default,linkConditions:f.linkConditions},t),g=(0,l.createResourceCache)();function _(e,n){var t=Agtk.objects.get(e),o=(0,a.getObjectInstance)(n),i=(0,r.getControllerId)(o);if(t.operatable&&i>=0)return i;var u=(0,
c.getParentObjectInstance)(o);return u?_(u.objectId,u.id):-1}function v(t,o,i,r){var a=function(e){for(var n=0;n<e.length;++n)if(e[n].id===f.InputConditionParameterId.Identifier)return e[n].value.trim();return f.inputConditionParameterDefaults.identifier
}(r);if(!a)return n.warn("testInputCondition {objectId: ".concat(t,", instanceId: ").concat(o,", actionLinkId: ").concat(i,"}: Unset identifier; defaulting to false")),!1;var c,u="".concat(t,",").concat(o,",").concat(a);g.has(u)?c=g.get(u):(c=function(e){
for(var t=JSON.stringify(f.inputConditionParameterDefaults.json),o=f.inputConditionParameterDefaults.fallback,i=f.inputConditionParameterDefaults.identifier,r=0;r<e.length;++r)switch(e[r].id){case f.InputConditionParameterId.Json:t=e[r].value;break
;case f.InputConditionParameterId.Fallback:o=e[r].value;break;case f.InputConditionParameterId.Identifier:i=e[r].value}var a=JSON.parse(t),c=(0,s.transformInputClause)(a);if(Array.isArray(c)){
n.error("parseInputCondition ".concat(i,": Invalid JSON logic detected:\n").concat(c.join("\n  - ")));var u=!1;return[function(){return u||(n.warn("".concat(i,": Invalid input condition; defaulting to false & suppressing this message")),u=!0),!1},o]}
return[c,o]}(r),g.set(u,c));var l=c[0],d=c[1],p=_(t,o);if(p<0&&d===f.InputConditionFallbackParameterId.AlwaysFalse)return!1;for(var v=p>=0?[p]:e,I=0;I<v.length;++I)if(l(v[I]))return!0;return!1}return o.initialize=function(r){if(r||(r={}),o.setInternal(r),
!t.inEditor()){e=[];for(var a=0;a<=Agtk.controllers.MaxControllerId;++a)e.push(a);n=(0,i.createLogger)({runtimeLog:function(e){Agtk.log("[Gestalt Input Plugin] ".concat(e))}}),Agtk.log(p)}},o.execLinkCondition=function(e,t,o,i,r){
if(e===f.linkConditionIdToIndexMap[f.LinkConditionId.InputCondition])return v(o,i,r,t);var a="{linkConditionIndex: ".concat(e,", objectId: ").concat(o,", instanceId: ").concat(i,", actionLinkId: ").concat(r,"}")
;return n.warn("execLinkCondition ".concat(a,": No matching link condition found; defaulting to false")),!1},o}},9497:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ControllerConstantPrefix=void 0,function(e){e.Op="OperationKey",
e.Pc="ReservedKeyCodePc_"}(n.ControllerConstantPrefix||(n.ControllerConstantPrefix={}))},8337:function(e,n,t){var o=this&&this.__createBinding||(Object.create?function(e,n,t,o){void 0===o&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){
return n[t]}})}:function(e,n,t,o){void 0===o&&(o=t),e[o]=n[t]}),i=this&&this.__exportStar||function(e,n){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(n,t)||o(n,e,t)};Object.defineProperty(n,"__esModule",{value:!0}),i(t(9497),n),
i(t(7393),n),i(t(3051),n),i(t(7142),n),i(t(8330),n),i(t(3200),n)},3051:function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InputKeyPrefix=void 0,function(e){e.Op="Op",e.Pc="Pc"}(n.InputKeyPrefix||(n.InputKeyPrefix={}))},7393:function(e,n){
Object.defineProperty(n,"__esModule",{value:!0}),n.InputKey=void 0,function(e){e.Op_A="Op_A",e.Op_B="Op_B",e.Op_X="Op_X",e.Op_Y="Op_Y",e.Op_R1="Op_R1",e.Op_R2="Op_R2",e.Op_L1="Op_L1",e.Op_L2="Op_L2",e.Op_Up="Op_Up",e.Op_Down="Op_Down",e.Op_Left="Op_Left",
e.Op_Right="Op_Right",e.Op_LeftStickUp="Op_LeftStickUp",e.Op_LeftStickDown="Op_LeftStickDown",e.Op_LeftStickLeft="Op_LeftStickLeft",e.Op_LeftStickRight="Op_LeftStickRight",e.Op_RightStickUp="Op_RightStickUp",e.Op_RightStickDown="Op_RightStickDown",
e.Op_RightStickLeft="Op_RightStickLeft",e.Op_RightStickRight="Op_RightStickRight",e.Op_LeftClick="Op_LeftClick",e.Op_RightClick="Op_RightClick",e.Op_Start="Op_Start",e.Op_Select="Op_Select",e.Op_Home="Op_Home",e.Op_Ok="Op_Ok",e.Op_Cancel="Op_Cancel",
e.Pc_W="Pc_W",e.Pc_A="Pc_A",e.Pc_S="Pc_S",e.Pc_D="Pc_D",e.Pc_LeftClick="Pc_LeftClick",e.Pc_RightClick="Pc_RightClick",e.Pc_Up="Pc_Up",e.Pc_Right="Pc_Right",e.Pc_Down="Pc_Down",e.Pc_Left="Pc_Left",e.Pc_MiddleClick="Pc_MiddleClick",
e.Pc_WheelUp="Pc_WheelUp",e.Pc_WhellDown="Pc_WhellDown",e.Pc_MousePointer="Pc_MousePointer"}(n.InputKey||(n.InputKey={}))},7142:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.transformInputClause=void 0
;var o=t(9480),i=t(8330),r=t(3200);n.transformInputClause=(0,o.createJsonLogicClauseTransform)((function(e){var n=(0,r.validateInputCondition)(e);return!0!==n?n:(0,i.transformInputCondition)(e)}))},8330:function(e,n,t){
Object.defineProperty(n,"__esModule",{value:!0}),n.transformInputCondition=void 0;var o=t(9497),i=t(3051);n.transformInputCondition=function(e){
var n=e[0],t=e[1],r=n.split("_"),a=r[0]===i.InputKeyPrefix.Pc?o.ControllerConstantPrefix.Pc:o.ControllerConstantPrefix.Op,c="".concat(a).concat(r[1]);return r[0]===i.InputKeyPrefix.Pc?function(e){
var n=!!Agtk.controllers.getKeyValue(e,Agtk.constants.controllers[c]);return t?n:!n}:function(e){var n=Agtk.controllers.getOperationKeyPressed(e,Agtk.constants.controllers[c]);return t?n:!n}}},3200:function(e,n,t){Object.defineProperty(n,"__esModule",{
value:!0}),n.validateInputCondition=void 0;var o=t(7393);n.validateInputCondition=function(e){
return Array.isArray(e)?2!==e.length?"Input condition condition must be of type array with exact length of 2":"string"!=typeof e[0]?"Input condition condition must be of type array with first element of type string":"string"!=typeof o.InputKey[e[0]]?"Input condition condition must be of type array with valid first element: '".concat(e[0],"' is invalid"):"boolean"==typeof e[1]||"Input condition condition must be of type array with second element of type boolean":"Input condition condition must be of type array"
}},3130:function(e,n,t){var o;Object.defineProperty(n,"__esModule",{value:!0}),n.linkConditions=n.inputConditionParameterDefaults=n.InputConditionFallbackParameterId=n.InputConditionParameterId=n.linkConditionIdToIndexMap=n.LinkConditionId=void 0
;var i,r,a,c=t(9073);!function(e){e[e.InputCondition=8177408]="InputCondition"}(i=n.LinkConditionId||(n.LinkConditionId={})),n.linkConditionIdToIndexMap=((o={})[i.InputCondition]=0,o),function(e){e[e.Json=8177409]="Json",e[e.Fallback=8177410]="Fallback",
e[e.Identifier=8177411]="Identifier"}(r=n.InputConditionParameterId||(n.InputConditionParameterId={})),function(e){e[e.Default=0]="Default",e[e.AlwaysFalse=1]="AlwaysFalse"}(a=n.InputConditionFallbackParameterId||(n.InputConditionFallbackParameterId={})),
n.inputConditionParameterDefaults={json:["Op_A",!0],fallback:a.Default,identifier:"Unique To Object"},n.linkConditions=[{id:i.InputCondition,name:"loca(LINK_CONDITION_0_NAME)",description:"loca(LINK_CONDITION_0_DESCRIPTION)",parameter:[{id:r.Identifier,
name:"loca(LINK_CONDITION_0_PARAMETER_2_NAME)",type:c.AgtkPluginUiParameterType.String,defaultValue:n.inputConditionParameterDefaults.identifier},{id:r.Json,name:"loca(LINK_CONDITION_0_PARAMETER_0_NAME)",type:c.AgtkPluginUiParameterType.Json,
defaultValue:n.inputConditionParameterDefaults.json},{id:r.Fallback,name:"loca(LINK_CONDITION_0_PARAMETER_1_NAME)",type:c.AgtkPluginUiParameterType.CustomId,customParam:[{id:a.Default,name:"loca(LINK_CONDITION_0_PARAMETER_1_PARAM_0_NAME)"},{
id:a.AlwaysFalse,name:"loca(LINK_CONDITION_0_PARAMETER_1_PARAM_1_NAME)"}],defaultValue:n.inputConditionParameterDefaults.fallback}]}]},4562:function(e,n,t){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}}
;Object.defineProperty(n,"__esModule",{value:!0});var i=o(t(950));i.default.PLUGIN_HELP=t(5639),n.default={locale:"en",data:i.default}},2923:function(e,n,t){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}}
;Object.defineProperty(n,"__esModule",{value:!0});var i=o(t(4562));n.default=[i.default]},5639:function(e){
e.exports="# Gestalt Input Plugin\n\nAn alternative way to define input link conditions with the following:\n\n-   JSON specification that maps an input key (`OperationKey` or `ReservedKeyCodePc`) to either a pressed (`true`) or released (`false`) state.\n    -   Available logic connectives: `NOT`, `AND`, `OR`, `NAND`, `NOR`, `XOR`, & `XNOR`.\n    -   Any errors in the input specification are output to the player's \"Runtime Console Log\"; an input condition will always return `false` in this case.\n-   Resolves any object instance to an operable controller.\n    -   Configurable fallback behavior when a controller is not found.\n\nThese features can open up new approaches to how you can structure your PGMMV games.\n\n> **⚠️Important⚠️**\n>\n> Make sure you setup up your controllable players as `Starting Points` in your scenes. Check out [baz](https://bazratcreates.itch.io/)'s [Multiplayer & Controller ID Setup tutorial](https://www.youtube.com/watch?v=FVp2UVoNpqc) for more details!\n\n## Link Condition Parameters\n\n-   **Gestalt Input Condition**\n    -   `Input Condition Identifier`: Non-empty string unique to the object.\n    -   `Input Condition JSON`: Domain specific JSON mapping input key to pressed/released state.\n    -   `Controller Fallback`: Define how this input condition behaves when no operable controller is found.\n        -   `ANY CONTROLLER`: Polls all controller IDs for first input condition satisfaction found. This is the default behavior for non-starting point objects.\n        -   `ALWAYS FALSE`: The link condition will never resolve to true.\n\n## Example Input Condition JSON\n\n`true` only when `Up Right` on the `Left Stick` is being pressed:\n\n```\n{\n  \"AND\": [\n    [\"Op_LeftStickDown\", false],\n    [\"Op_LeftStickUp\", true],\n    [\"Op_LeftStickRight\", true],\n    [\"Op_LeftStickLeft\", false]\n  ]\n}\n```\n\n`true` only when any direction other than `Up Right` is being pressed on the `Left Stick`:\n\n```\n{\n  \"OR\": [\n    {\n      \"AND\": [\n        [\"Op_LeftStickUp\", false],\n        {\n          \"OR\": [\n            [\"Op_LeftStickRight\", true],\n            [\"Op_LeftStickDown\", true],\n            [\"Op_LeftStickLeft\", true]\n          ]\n        }\n      ]\n    },\n    {\n      \"AND\": [\n        [\"Op_LeftStickRight\", false],\n        {\n          \"OR\": [\n            [\"Op_LeftStickDown\", true],\n            [\"Op_LeftStickUp\", true],\n            [\"Op_LeftStickLeft\", true]\n          ]\n        }\n      ]\n    }\n  ]\n}\n```\n\n## Input Condition JSON EBNF\n\n[Extended Backus-Naur form](https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form) representation:\n\n```\nclause       = not clause | and clause | or clause | nand clause | nor clause | xor clause | xnor clause | condition ;\nclause array = '[' , clauses , ']' ;\nclauses      = clause [ , ',' , clauses ] ;\nnot clause   = '{' , '\"NOT\"' , ':' , '[' , clause , ']', '}' ;\nand clause   = '{' , '\"AND\"' , ':' , clause array '}' ;\nor clause    = '{' , '\"OR\"' , ':' , clause array '}' ;\nnand clause   = '{' , '\"NAND\"' , ':' , clause array '}' ;\nnor clause    = '{' , '\"NOR\"' , ':' , clause array '}' ;\nxor clause    = '{' , '\"XOR\"' , ':' , clause array '}' ;\nxnor clause    = '{' , '\"XNOR\"' , ':' , clause array '}' ;\ncondition    = '[' , key , ',' , boolean , ']' ;\nboolean      = 'true' | 'false'\nkey          =\n    | '\"Op_A\"'\n    | '\"Op_B\"'\n    | '\"Op_X\"'\n    | '\"Op_Y\"'\n    | '\"Op_R1\"'\n    | '\"Op_R2\"'\n    | '\"Op_L1\"'\n    | '\"Op_L2\"'\n    | '\"Op_Up\"'\n    | '\"Op_Down\"'\n    | '\"Op_Left\"'\n    | '\"Op_Right\"'\n    | '\"Op_LeftStickUp\"'\n    | '\"Op_LeftStickDown\"'\n    | '\"Op_LeftStickLeft\"'\n    | '\"Op_LeftStickRight\"'\n    | '\"Op_RightStickUp\"'\n    | '\"Op_RightStickDown\"'\n    | '\"Op_RightStickLeft\"'\n    | '\"Op_RightStickRight\"'\n    | '\"Op_LeftClick\"'\n    | '\"Op_RightClick\"'\n    | '\"Op_Start\"'\n    | '\"Op_Select\"'\n    | '\"Op_Home\"'\n    | '\"Op_Ok\"'\n    | '\"Op_Cancel\"'\n    | '\"Pc_W\"'\n    | '\"Pc_A\"'\n    | '\"Pc_S\"'\n    | '\"Pc_D\"'\n    | '\"Pc_LeftClick\"'\n    | '\"Pc_RightClick\"'\n    | '\"Pc_Up\"'\n    | '\"Pc_Right\"'\n    | '\"Pc_Down\"'\n    | '\"Pc_Left\"'\n    | '\"Pc_MiddleClick\"'\n    | '\"Pc_WheelUp\"'\n    | '\"Pc_WhellDown\"'\n    | '\"Pc_MousePointer\"'\n    ;\n```\n\n## Notes\n\n-   **Input Condition JSON**: Parsed **once** (into a function) and then cached. Cache keys are constructed from the current `objectId`, `instanceId`, and user specified `Input Condition Identifier`; thus the `Input Condition Identifier` must be unique to the object/instance - no runtime checks are performed for correctness here (other than ensuring the identifier is a non-empty string).\n\n    -   While the editor takes care of validating the _structure_ any input JSON, additional checks are performed to ensure the JSON conforms to our _grammar_. Any errors are logged and the affected input condition will always return false.\n\n-   **Controller IDs**: Fetched on each link condition test as follows:\n\n    1. Current object is checked if `operable` and its instance's built-in `Controller ID` variable value is a valid controller ID.\n    2. When controller ID value is invalid, traverse to the instance's parent object instance (if it exists) and repeat step 1.\n    3. If search is exhausted (ie. no valid controller ID and no more ancestors to check), use specified fallback setting for this link condition.\n\n    We perform this search each time in case a child object gets swapped out to a different 'operable object hierarchy' during the course of gameplay. Beware of this when building objects that make of use of `Common Actions` with this link condition.\n\n> _gestalt_ - _an organized whole that is perceived as more than the sum of its parts._\n"
},950:function(e){
e.exports=JSON.parse('{"PLUGIN_NAME":"Gestalt Input","PLUGIN_DESCRIPTION":"Input condition with JSON; Resolves to an operable controller*.","PLUGIN_AUTHOR":"kidthales <kidthales@agogpixel.com>","PLUGIN_HELP":"See help.md","LINK_CONDITION_0_NAME":"Gestalt Input Condition","LINK_CONDITION_0_DESCRIPTION":"Input condition with JSON; Resolves to an operable controller*.","LINK_CONDITION_0_PARAMETER_0_NAME":"Input Condition JSON","LINK_CONDITION_0_PARAMETER_1_NAME":"Controller Fallback","LINK_CONDITION_0_PARAMETER_1_PARAM_0_NAME":"ANY CONTROLLER","LINK_CONDITION_0_PARAMETER_1_PARAM_1_NAME":"ALWAYS FALSE","LINK_CONDITION_0_PARAMETER_2_NAME":"Input Condition Identifier"}')
}},n={};function t(o){var i=n[o];if(void 0!==i)return i.exports;var r=n[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}
return(0,t(5289).createGestaltInputPlugin)()}();
}());